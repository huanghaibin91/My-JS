<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>事件</title>
</head>

<body>
    <script type="text/javascript">
        // 事件冒泡事件模型三个阶段：事件捕获阶段，处于目标阶段，事件冒泡阶段
        // event.eventPhase属性：1，捕获阶段；2，处于目标阶段；3，冒泡阶段

        // 由于事件会在冒泡阶段向上传播到父节点，因此可以把子节点的监听函数定义在父节点上，由父节点的监听函数统一处理多个子元素的事件。
        // 这种方法叫做事件的代理（delegation）
        // stopPropagation方法只会阻止当前监听函数的传播，不会阻止节点上的其他click事件的监听函数。如果想要不再触发那些监听函数，
        // 可以使用stopImmediatePropagation方法
        // 例如一个节点绑定了两个点击事件，其中一个调用了preventPropagation()方法，只有这个事件不会冒泡，另一个仍然会冒泡，如果使用
        // stopImmediatePropagation()会阻止所有当前节点的事件冒泡

        //使用DOM0级事件时，事件处理程序的this指向当前元素，被当做元素的方法

        // DOM2级事件可以添加多个同类型事件
        // DOM2级事件处理addEventListener(),removeEventListener(),接收三个参数，事件名，事件处理函数，布尔值，
        // 最后一个布尔值默认false，代表事件冒泡，设置为true表示事件捕获，DOM2可以为同一元素设置多个事件处理函数，
        // W3C this指向当前元素，被当做元素的方法，IE指向window
        // IE中attachEvent(),detachEvent(),两个参数，事件名加‘on’，事件处理函数,this指向window，IE中的event也
        // 是window下的一个属性

        // addEventListener：绑定事件的监听函数
        // removeEventListener：移除事件的监听函数
        // dispatchEvent：触发事件，参数是一个Event对象的实例

        // 事件对象：
        // DOM事件：type、target
        // IE事件：type、srcElement

        // 宽浏览器事件处理，IE9+支持W3C标准事件处理
        var EventUtil = {
            addHandler: function (ele, type, handler) {
                if (ele.addEventListener) {
                    ele.addEventListener(type, handler, false);
                } else if (ele.attachEvent) {
                    ele.attachEvent('on' + type, handler);
                } else {
                    ele['on' + type] = handler;
                }
            },
            removeHandler: function (ele, type, handler) {
                if (ele.removeEventListener) {
                    ele.removeEventListener(type, handler, false);
                } else if (ele.detachEvent) {
                    ele.detachEvent('on' + type, handler);
                } else {
                    ele['on' + type] = null;
                }
            },
            getEvent: function (event) {
                return event ? event : window.event;
            },
            getTarget: function (event) {
                return event.target || event.srcElement;
            },
            preventDefault: function (event) {
                if (event.preventDefault) {
                    event.preventDefault();
                } else {
                    event.returnValue = false;
                }
            },
            stopPropagation: function (event) {
                if (event.stopPropagation) {
                    event.stopPropagation();
                } else {
                    event.cancelBubble = true;
                }
            },
            // 获取滚轮滚动值
            getWheelDelta: function (event) {
                if (event.wheelDelta) {
                    return (client.engine.opera && client.engine.opera < 9.5 ? -event.wheelDelta : event.wheelDelta);
                } else {
                    return -event.detail * 40;
                }
            }
        };

        // 事件类型

        // UI事件，load,unload,select,resize,scroll
        // unload,用户从一个页面切换到另一个页面触发，最多用于清除引用，避免内存泄露
        // resize，浏览器窗口大小变化时触发
        // scroll，文档滚动时触发

        // 鼠标事件
        // click
        // dblclick
        // mousedown
        // mouseup
        // mouseenter,光标首次从外部移动到元素范围内触发，不冒泡
        // mouseleave，不冒泡
        // mousemove
        // mouseout
        // mouseover
        // contextmenu事件在一个节点上点击鼠标右键时触发，或者按下“上下文菜单”键时触发
        // 鼠标在浏览器窗口位置clientX,clientY
        // 鼠标在页面位置pageX，pageY
        // 鼠标在屏幕位置screenX，screenY

        // 键盘事件
        // keydown
        // keyup
        // keypress,按下字符键触发，按住不放重复触发
        // keyCode,键码

        // 进度事件，进度事件用来描述一个事件进展的过程，比如XMLHttpRequest对象发出的HTTP请求的过程
        // <img>、<audio>、<video>、<style>、<link>加载外部资源的过程。下载和上传都会发生进度事件
        // abort事件：当进度事件被中止时触发。如果发生错误，导致进程中止，不会触发该事件。
        // error事件：由于错误导致资源无法加载时触发。
        // load事件：进度成功结束时触发。
        // loadstart事件：进度开始时触发。
        // loadend事件：进度停止时触发，发生顺序排在error事件\abort事件\load事件后面。
        // progress事件：当操作处于进度之中，由传输的数据块不断触发。
        // timeout事件：进度超过限时触发。
        // 浏览器提供一个ProgressEvent构造函数，用来生成进度事件的实例
        // ProgressEvent构造函数的第一个参数是事件类型（字符串），第二个参数是配置对象，用来指定lengthComputable属性（默认值为false）、
        // loaded属性（默认值为0）、total属性（默认值为0）
        progressEvent = new ProgressEvent(type, {
            lengthComputable: aBooleanValue,
            loaded: aNumber,
            total: aNumber
        });

        // 触摸事件
        // touchstart：用户接触触摸屏时触发，它的target属性返回发生触摸的Element节点。
        // touchend：用户不再接触触摸屏时（或者移出屏幕边缘时）触发，它的target属性与touchstart事件的target属性是一致的，
        // 它的changedTouches属性返回一个TouchList对象，包含所有不再触摸的触摸点（Touch对象）。
        // touchmove：用户移动触摸点时触发，它的target属性与touchstart事件的target属性一致。如果触摸的半径、角度、力度发生变化，
        // 也会触发该事件。
        // touchcancel：触摸点取消时触发，比如在触摸区域跳出一个情态窗口（modal window）、触摸点离开了文档区域（进入浏览器菜单栏
        // 区域）、用户放置更多的触摸点（自动取消早先的触摸点）。
        // 触摸属性：
        // touch对象属性：identifier属性表示Touch实例的独一无二的识别符，screenX，screenY，clientX，clientY，pageX，pageY
        // TouchList
        // TouchEvent

        // 表单事件：
        // Input事件，当<input>、<textarea>的值发生变化时触发。此外，打开contenteditable属性的元素，只要值发生变化，也会触发input事件
        // select事件，当在<input>、<textarea>中选中文本时触发
        // change事件，当<input>、<select>、<textarea>的值发生变化时触发。不会连续触发，只有当全部修改完成时才会触发
            // 激活单选框（radio）或复选框（checkbox）时触发。
            // 用户提交时触发。比如，从下列列表（select）完成选择，在日期或文件输入框完成选择。
            // 当文本框或textarea元素的值发生改变，并且丧失焦点时触发。
        // reset事件，submit事件
        
        // 文档事件
        // beforeunload事件，unload事件，load事件，error事件，pageshow事件，pagehide事件
        // beforeunload，卸载页面前触发，例如用户关闭页面的提示消息
        // DOMContentLoaded事件，当HTML文档下载并解析完成以后触发，外部资源还未加载，比load早
        // readystatechange事件，发生在Document对象和XMLHttpRequest对象，当它们的readyState属性发生变化时触发
        // scroll事件，resize事件
        // hashchange事件，在URL的hash部分（即#号后面的部分，包括#号）发生变化时触发，这个事件得搬动window对象
        // popstate事件，在浏览器的history对象的当前记录发生显式切换时触发

        // 文本事件： cut事件，copy事件，paste事件

        // contextmenu事件右键显示上下文菜单时触发，冒泡
        
        // CSS事件
        // transitionEnd事件，属性：
            // propertyName：发生transition效果的CSS属性名。
            // elapsedTime：transition效果持续的秒数，不含transition-delay的时间。
            // pseudoElement：如果transition效果发生在伪元素，会返回该伪元素的名称，以“::”开头。如果不发生在伪元素上，则返回一个空字符串。
        // animationstart事件，animationend事件，animationiteration事件
        
        // DOM2级变动事件
        // DOMSutreeModified
        // DOMNodeInserted
        // DOMNodeRemoved


    </script>
</body>

</html>